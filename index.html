<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/auth.css">
    <link rel="stylesheet" href="src/css/dashboard.css">
</head>
<body>
    <div class="container">
        <!-- ============================================
             AUTHENTICATION SECTION
             ============================================ -->
        <div id="auth-section">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h1>‚ú® Employee System ‚ú®</h1>
                        <p style="color: var(--text-secondary);">Welcome back!</p>
                    </div>
                    
                    <!-- Auth Tabs -->
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="switchAuthTab('signin')">Sign In</button>
                        <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
                    </div>
                    
                    <div id="alert-container"></div>
                    
                    <!-- Sign In Form -->
                    <form id="signin-form" class="auth-form">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="signin-email" required placeholder="Enter your email">
                        </div>
                        
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="signin-password" required placeholder="Enter your password">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Sign In</button>
                        
                        <div class="text-center">
                            <button type="button" class="link-button" onclick="showForgotPassword()">
                                Forgot Password?
                            </button>
                        </div>
                    </form>
                    
                    <!-- Sign Up Form -->
                    <form id="signup-form" class="auth-form hidden">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="signup-name" required placeholder="Enter your full name">
                        </div>
                        
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="signup-email" required placeholder="Enter your email">
                        </div>
                        
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="signup-password" required minlength="8" placeholder="Minimum 8 characters">
                        </div>
                        
                        <div class="form-group">
                            <label>Confirm Password</label>
                            <input type="password" id="signup-confirm" required placeholder="Re-enter password">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </form>
                    
                    <!-- Forgot Password Form -->
                    <form id="forgot-form" class="auth-form hidden">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="forgot-email" required placeholder="Enter your email">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Reset Password</button>
                        <button type="button" class="btn btn-secondary" onclick="showSignIn()">Back to Sign In</button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- ============================================
             DASHBOARD SECTION
             ============================================ -->
        <div id="dashboard-section" class="dashboard">
            <div class="dashboard-header">
                <h1>üìä Dashboard</h1>
                <div class="user-info">
                    <span>Welcome, <strong id="user-name"></strong>!</span>
                    <button class="btn-logout" onclick="logout()">Logout</button>
                </div>
            </div>
            
            <!-- Employees Table -->
            <div class="table-container">
                <div class="table-header">
                    <h2>üë• Employees</h2>
                    <button class="btn btn-add" onclick="openEmployeeModal()">
                        ‚ûï Add Employee
                    </button>
                </div>
                
                <table id="employees-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Department</th>
                            <th>Position</th>
                            <th>Salary</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="employees-tbody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Users Table (Admin Only) -->
            <div id="users-table-container" class="table-container hidden">
                <div class="table-header">
                    <h2>üîê Users</h2>
                    <button class="btn btn-add" onclick="openUserModal()">
                        ‚ûï Add User
                    </button>
                </div>
                
                <table id="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Created</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-tbody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Password Log Table (Admin Only) -->
            <div id="password-log-container" class="table-container hidden">
                <div class="table-header">
                    <h2>üîë Password Change Log</h2>
                    <div class="table-controls">
                        <button class="btn btn-secondary" onclick="refreshPasswordLogs()">üîÑ Refresh</button>
                    </div>
                </div>
                
                <table id="password-log-table">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Action</th>
                            <th>Changed By</th>
                            <th>Module</th>
                            <th>Timestamp</th>
                        </tr>
                    </thead>
                    <tbody id="password-log-tbody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Login Attempts Log Table (Admin Only) -->
            <div id="login-log-container" class="table-container hidden">
                <div class="table-header">
                    <h2>üìù Login Attempts Log</h2>
                    <div class="table-controls">
                        <button class="btn btn-secondary" onclick="refreshLoginLogs()">üîÑ Refresh</button>
                    </div>
                </div>
                
                <table id="login-log-table">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Attempts</th>
                            <th>Status</th>
                            <th>Last Attempt</th>
                            <th>IP Address</th>
                        </tr>
                    </thead>
                    <tbody id="login-log-tbody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Deleted Employees Table (Admin Only) -->
            <div id="deleted-employees-container" class="table-container hidden">
                <div class="table-header">
                    <h2>üóëÔ∏è Deleted Employees Archive</h2>
                    <div class="table-controls">
                        <button class="btn btn-secondary" onclick="refreshDeletedEmployees()">üîÑ Refresh</button>
                    </div>
                </div>
                
                <table id="deleted-employees-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Department</th>
                            <th>Position</th>
                            <th>Deleted By</th>
                            <th>Deleted At</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="deleted-employees-tbody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- ============================================
             USER MODAL
             ============================================ -->
        <div id="user-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="user-modal-title">Add User</h2>
                    <button class="close-modal" onclick="closeUserModal()">&times;</button>
                </div>
                
                <div id="user-modal-alert-container"></div>
                
                <form id="user-form">
                    <input type="hidden" id="user-id">
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Full Name *</label>
                            <input type="text" id="user-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="user-email" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Password *</label>
                            <input type="password" id="user-password" required minlength="8" placeholder="Minimum 8 characters">
                        </div>
                        
                        <div class="form-group">
                            <label>Role *</label>
                            <select id="user-role" required>
                                <option value="">Select Role</option>
                                <option value="user">User</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Save User</button>
                    <button type="button" class="btn btn-secondary" onclick="closeUserModal()">Cancel</button>
                </form>
            </div>
        </div>
        
        <!-- ============================================
             EMPLOYEE MODAL
             ============================================ -->
        <div id="employee-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="employee-modal-title">Add Employee</h2>
                    <button class="close-modal" onclick="closeEmployeeModal()">&times;</button>
                </div>
                
                <div id="modal-alert-container"></div>
                
                <form id="employee-form">
                    <input type="hidden" id="employee-id">
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label>First Name *</label>
                            <input type="text" id="emp-firstname" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Last Name *</label>
                            <input type="text" id="emp-lastname" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="emp-email" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="emp-phone">
                        </div>
                        
                        <div class="form-group">
                            <label>Department *</label>
                            <select id="emp-department" required>
                                <option value="">Select Department</option>
                                <option value="HR">Human Resources</option>
                                <option value="IT">Information Technology</option>
                                <option value="Sales">Sales & Marketing</option>
                                <option value="Finance">Finance</option>
                                <option value="Operations">Operations</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Position *</label>
                            <input type="text" id="emp-position" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Hire Date *</label>
                            <input type="date" id="emp-hiredate" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Salary *</label>
                            <input type="number" id="emp-salary" required step="0.01">
                        </div>
                        
                        <div class="form-group full-width">
                            <label>Address</label>
                            <textarea id="emp-address" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Save Employee</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEmployeeModal()">Cancel</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- JavaScript Modules -->
    <script src="src/js/modules/database.js"></script>
    <script src="src/js/modules/auth.js"></script>
    <script src="src/js/modules/employees.js"></script>
    <script src="src/js/modules/users.js"></script>
    <script src="src/js/modules/logs.js"></script>
    <script src="src/js/modules/dashboard.js"></script>
    <script src="src/js/modules/utils.js"></script>
    
    <!-- Main Application -->
    <script src="src/js/app.js"></script>
</body>
</html>
